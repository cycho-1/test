<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äºŒæ‰‹è½¦ä»·æ ¼å¯¹æ¯” - è‹å·ç«™</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: #f5f5f5;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 28px;
            font-weight: bold;
        }

        .header-links {
            display: flex;
            gap: 20px;
        }

        .header-links a {
            color: white;
            text-decoration: none;
            opacity: 0.9;
        }

        .header-links a:hover {
            opacity: 1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .search-bar {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 25px;
        }

        .search-bar h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 20px;
        }

        .filter-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-group label {
            color: #666;
            font-weight: 500;
        }

        select, input {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            min-width: 120px;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #667eea;
        }

        .search-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 30px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }

        .search-btn:hover {
            opacity: 0.9;
        }

        .main-content {
            display: flex;
            gap: 20px;
        }

        .car-list {
            flex: 1;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .section-title {
            color: #333;
            font-size: 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .result-count {
            color: #999;
            font-size: 14px;
            font-weight: normal;
        }

        .car-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }

        .car-card {
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
            background: white;
        }

        .car-card:hover {
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
            transform: translateY(-2px);
        }

        .car-card.selected {
            border: 2px solid #667eea;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
        }

        .car-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            background: #f0f0f0;
        }

        .car-info {
            padding: 15px;
        }

        .car-name {
            color: #333;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .car-price {
            color: #e74c3c;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .car-price span {
            font-size: 14px;
            color: #999;
            font-weight: normal;
        }

        .car-details {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            font-size: 13px;
            color: #666;
            margin-bottom: 10px;
        }

        .car-detail {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .car-location {
            color: #999;
            font-size: 13px;
            padding-top: 10px;
            border-top: 1px solid #f0f0f0;
        }

        .compare-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            padding: 15px 20px;
            z-index: 1000;
            transform: translateY(100%);
            transition: transform 0.3s;
        }

        .compare-bar.visible {
            transform: translateY(0);
        }

        .compare-bar-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .compare-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .compare-count {
            background: #e74c3c;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
        }

        .compare-car-list {
            display: flex;
            gap: 10px;
        }

        .compare-car-item {
            background: #f5f5f5;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 13px;
            max-width: 150px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .compare-buttons {
            display: flex;
            gap: 10px;
        }

        .btn-compare {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }

        .btn-clear {
            background: #f5f5f5;
            color: #666;
            border: 1px solid #ddd;
            padding: 10px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal.visible {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 10px;
            max-width: 1200px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #e8e8e8;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            color: #333;
            font-size: 20px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        .compare-table-container {
            padding: 20px;
            overflow-x: auto;
        }

        .compare-table {
            width: 100%;
            border-collapse: collapse;
        }

        .compare-table th, .compare-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e8e8e8;
            vertical-align: top;
        }

        .compare-table th {
            background: #f5f5f5;
            color: #666;
            font-weight: 500;
            width: 120px;
        }

        .compare-table td {
            min-width: 200px;
        }

        .compare-car-name {
            font-weight: bold;
            color: #333;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .compare-car-price {
            color: #e74c3c;
            font-size: 24px;
            font-weight: bold;
        }

        .compare-best {
            background: #e8f5e9;
        }

        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .badge-low {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .badge-high {
            background: #fff3e0;
            color: #e65100;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .source-link {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #f0f0f0;
            text-align: center;
        }

        .source-link a {
            color: #667eea;
            text-decoration: none;
            font-size: 13px;
        }

        .source-link a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .car-grid {
                grid-template-columns: 1fr;
            }
            
            .filter-row {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-group {
                flex-direction: column;
                align-items: stretch;
            }
            
            select, input {
                width: 100%;
            }
            
            .compare-bar-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .compare-info {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <h1>äºŒæ‰‹è½¦ä»·æ ¼å¯¹æ¯”</h1>
            <div class="header-links">
                <a href="https://www.autohome.com.cn" target="_blank">æ±½è½¦ä¹‹å®¶</a>
                <a href="https://www.autohome.com.cn/suzhou" target="_blank">è‹å·ç«™</a>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="search-bar">
            <h2>ğŸ” ç­›é€‰æ¡ä»¶</h2>
            <div class="filter-row">
                <div class="filter-group">
                    <label>ä»·æ ¼åŒºé—´ï¼š</label>
                    <select id="priceRange">
                        <option value="">å…¨éƒ¨</option>
                        <option value="0-5">5ä¸‡ä»¥ä¸‹</option>
                        <option value="5-10">5-10ä¸‡</option>
                        <option value="10-15">10-15ä¸‡</option>
                        <option value="15-20">15-20ä¸‡</option>
                        <option value="20-30">20-30ä¸‡</option>
                        <option value="30-50">30-50ä¸‡</option>
                        <option value="50-999">50ä¸‡ä»¥ä¸Š</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>å“ç‰Œï¼š</label>
                    <select id="brand">
                        <option value="">å…¨éƒ¨</option>
                        <option value="å¥¥è¿ª">å¥¥è¿ª</option>
                        <option value="å®é©¬">å®é©¬</option>
                        <option value="å¥”é©°">å¥”é©°</option>
                        <option value="å¤§ä¼—">å¤§ä¼—</option>
                        <option value="ä¸°ç”°">ä¸°ç”°</option>
                        <option value="æœ¬ç”°">æœ¬ç”°</option>
                        <option value="æ—¥äº§">æ—¥äº§</option>
                        <option value="æ¯”äºšè¿ª">æ¯”äºšè¿ª</option>
                        <option value="ç‰¹æ–¯æ‹‰">ç‰¹æ–¯æ‹‰</option>
                        <option value="å‰åˆ©">å‰åˆ©</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>è½¦é¾„ï¼š</label>
                    <select id="carAge">
                        <option value="">å…¨éƒ¨</option>
                        <option value="1">1å¹´ä»¥å†…</option>
                        <option value="2">2å¹´ä»¥å†…</option>
                        <option value="3">3å¹´ä»¥å†…</option>
                        <option value="5">5å¹´ä»¥å†…</option>
                        <option value="10">10å¹´ä»¥å†…</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>é‡Œç¨‹ï¼š</label>
                    <select id="mileage">
                        <option value="">å…¨éƒ¨</option>
                        <option value="3">3ä¸‡å…¬é‡Œä»¥å†…</option>
                        <option value="5">5ä¸‡å…¬é‡Œä»¥å†…</option>
                        <option value="8">8ä¸‡å…¬é‡Œä»¥å†…</option>
                        <option value="10">10ä¸‡å…¬é‡Œä»¥å†…</option>
                    </select>
                </div>
                <button class="search-btn" onclick="filterCars()">æœç´¢</button>
            </div>
        </div>

        <div class="main-content">
            <div class="car-list">
                <div class="section-title">
                    <span>çƒ­é—¨äºŒæ‰‹è½¦</span>
                    <span class="result-count" id="resultCount">å…± 12 è¾†</span>
                </div>
                <div class="car-grid" id="carGrid">
                    <!-- è½¦è¾†å¡ç‰‡å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
                <div class="source-link">
                    <a href="https://www.autohome.com.cn/suzhou/?from=m" target="_blank">æŸ¥çœ‹æ±½è½¦ä¹‹å®¶è‹å·ç«™æ›´å¤šä¿¡æ¯ â†’</a>
                </div>
            </div>
        </div>
    </div>

    <div class="compare-bar" id="compareBar">
        <div class="compare-bar-content">
            <div class="compare-info">
                <span class="compare-count" id="compareCount">0</span>
                <div class="compare-car-list" id="compareCarList"></div>
            </div>
            <div class="compare-buttons">
                <button class="btn-clear" onclick="clearCompare()">æ¸…ç©º</button>
                <button class="btn-compare" onclick="showCompareModal()">ç«‹å³å¯¹æ¯”</button>
            </div>
        </div>
    </div>

    <div class="modal" id="compareModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>è½¦è¾†å¯¹æ¯”</h3>
                <button class="close-btn" onclick="closeCompareModal()">&times;</button>
            </div>
            <div class="compare-table-container">
                <table class="compare-table" id="compareTable">
                    <!-- å¯¹æ¯”è¡¨æ ¼å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </table>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹ŸäºŒæ‰‹è½¦æ•°æ®
        const carData = [
            {
                id: 1,
                name: "å¥¥è¿ª A4L 2022æ¬¾ 40 TFSI è±ªååŠ¨æ„Ÿå‹",
                brand: "å¥¥è¿ª",
                price: 24.8,
                originalPrice: 35.8,
                year: 2022,
                mileage: 2.3,
                location: "è‹å·å·¥ä¸šå›­åŒº",
                image: "https://via.placeholder.com/320x180/667eea/ffffff?text=å¥¥è¿ªA4L",
                engine: "2.0T",
                transmission: "7æŒ¡åŒç¦»åˆ",
                fuel: "æ±½æ²¹",
                color: "ç™½è‰²",
                owner: "ä¸ªäººå–å®¶"
            },
            {
                id: 2,
                name: "å®é©¬ 3ç³» 2021æ¬¾ 325Li è¿åŠ¨æ›œå¤œå¥—è£…",
                brand: "å®é©¬",
                price: 26.5,
                originalPrice: 37.9,
                year: 2021,
                mileage: 3.8,
                location: "è‹å·é«˜æ–°åŒº",
                image: "https://via.placeholder.com/320x180/764ba2/ffffff?text=å®é©¬3ç³»",
                engine: "2.0T",
                transmission: "8æŒ¡æ‰‹è‡ªä¸€ä½“",
                fuel: "æ±½æ²¹",
                color: "é»‘è‰²",
                owner: "è½¦å•†è®¤è¯"
            },
            {
                id: 3,
                name: "å¥”é©° Cçº§ 2022æ¬¾ C260L è¿åŠ¨ç‰ˆ",
                brand: "å¥”é©°",
                price: 27.8,
                originalPrice: 38.5,
                year: 2022,
                mileage: 2.1,
                location: "è‹å·å§‘è‹åŒº",
                image: "https://via.placeholder.com/320x180/e74c3c/ffffff?text=å¥”é©°Cçº§",
                engine: "1.5T",
                transmission: "9æŒ¡æ‰‹è‡ªä¸€ä½“",
                fuel: "æ±½æ²¹",
                color: "é“¶è‰²",
                owner: "ä¸ªäººå–å®¶"
            },
            {
                id: 4,
                name: "å¤§ä¼— è¿ˆè…¾ 2023æ¬¾ 380TSI DSG é¢†å°Šå‹",
                brand: "å¤§ä¼—",
                price: 18.5,
                originalPrice: 25.9,
                year: 2023,
                mileage: 1.5,
                location: "è‹å·å´ä¸­åŒº",
                image: "https://via.placeholder.com/320x180/2ecc71/ffffff?text=å¤§ä¼—è¿ˆè…¾",
                engine: "2.0T",
                transmission: "7æŒ¡åŒç¦»åˆ",
                fuel: "æ±½æ²¹",
                color: "ç™½è‰²",
                owner: "è½¦å•†è®¤è¯"
            },
            {
                id: 5,
                name: "ä¸°ç”° å‡¯ç¾ç‘ 2022æ¬¾ åŒæ“ 2.5HG é¢†å…ˆç‰ˆ",
                brand: "ä¸°ç”°",
                price: 15.8,
                originalPrice: 23.8,
                year: 2022,
                mileage: 2.9,
                location: "è‹å·ç›¸åŸåŒº",
                image: "https://via.placeholder.com/320x180/3498db/ffffff?text=ä¸°ç”°å‡¯ç¾ç‘",
                engine: "2.5Læ··åŠ¨",
                transmission: "E-CVT",
                fuel: "æ²¹ç”µæ··åˆ",
                color: "ç°è‰²",
                owner: "ä¸ªäººå–å®¶"
            },
            {
                id: 6,
                name: "æœ¬ç”° é›…é˜ 2023æ¬¾ e:PHEV æ’æ··ç‰ˆ",
                brand: "æœ¬ç”°",
                price: 16.9,
                originalPrice: 24.5,
                year: 2023,
                mileage: 0.8,
                location: "è‹å·å´æ±ŸåŒº",
                image: "https://via.placeholder.com/320x180/9b59b6/ffffff?text=æœ¬ç”°é›…é˜",
                engine: "2.0L",
                transmission: "E-CVT",
                fuel: "æ’ç”µæ··åŠ¨",
                color: "ç™½è‰²",
                owner: "è½¦å•†è®¤è¯"
            },
            {
                id: 7,
                name: "æ—¥äº§ è½©é€¸ 2022æ¬¾ e-Power å…¨ç”µé©±Pro",
                brand: "æ—¥äº§",
                price: 9.8,
                originalPrice: 15.9,
                year: 2022,
                mileage: 1.8,
                location: "è‹å·å·¥ä¸šå›­åŒº",
                image: "https://via.placeholder.com/320x180/1abc9c/ffffff?text=æ—¥äº§è½©é€¸",
                engine: "1.2L",
                transmission: "å•é€Ÿ",
                fuel: "å¢ç¨‹ç”µåŠ¨",
                color: "è“è‰²",
                owner: "ä¸ªäººå–å®¶"
            },
            {
                id: 8,
                name: "æ¯”äºšè¿ª ç§¦PLUS DM-i 2023æ¬¾ å† å†›ç‰ˆ",
                brand: "æ¯”äºšè¿ª",
                price: 8.5,
                originalPrice: 12.5,
                year: 2023,
                mileage: 0.5,
                location: "è‹å·é«˜æ–°åŒº",
                image: "https://via.placeholder.com/320x180/e67e22/ffffff?text=æ¯”äºšè¿ªç§¦PLUS",
                engine: "1.5L",
                transmission: "E-CVT",
                fuel: "æ’ç”µæ··åŠ¨",
                color: "ç™½è‰²",
                owner: "è½¦å•†è®¤è¯"
            },
            {
                id: 9,
                name: "ç‰¹æ–¯æ‹‰ Model 3 2023æ¬¾ åè½®é©±åŠ¨ç‰ˆ",
                brand: "ç‰¹æ–¯æ‹‰",
                price: 18.9,
                originalPrice: 25.9,
                year: 2023,
                mileage: 1.2,
                location: "è‹å·å§‘è‹åŒº",
                image: "https://via.placeholder.com/320x180/34495e/ffffff?text=ç‰¹æ–¯æ‹‰Model3",
                engine: "çº¯ç”µ",
                transmission: "å•é€Ÿ",
                fuel: "çº¯ç”µåŠ¨",
                color: "çº¢è‰²",
                owner: "ä¸ªäººå–å®¶"
            },
            {
                id: 10,
                name: "å‰åˆ© æ˜Ÿè¶ŠL 2023æ¬¾ 2.0TD é«˜åŠŸç‰ˆ",
                brand: "å‰åˆ©",
                price: 12.8,
                originalPrice: 17.8,
                year: 2023,
                mileage: 0.9,
                location: "è‹å·å´ä¸­åŒº",
                image: "https://via.placeholder.com/320x180/16a085/ffffff?text=å‰åˆ©æ˜Ÿè¶ŠL",
                engine: "2.0T",
                transmission: "8æŒ¡æ‰‹è‡ªä¸€ä½“",
                fuel: "æ±½æ²¹",
                color: "é»‘è‰²",
                owner: "è½¦å•†è®¤è¯"
            },
            {
                id: 11,
                name: "å¥¥è¿ª Q5L 2021æ¬¾ 45 TFSI è±ªååŠ¨æ„Ÿå‹",
                brand: "å¥¥è¿ª",
                price: 28.5,
                originalPrice: 42.5,
                year: 2021,
                mileage: 4.2,
                location: "è‹å·ç›¸åŸåŒº",
                image: "https://via.placeholder.com/320x180/667eea/ffffff?text=å¥¥è¿ªQ5L",
                engine: "2.0T",
                transmission: "7æŒ¡åŒç¦»åˆ",
                fuel: "æ±½æ²¹",
                color: "ç™½è‰²",
                owner: "è½¦å•†è®¤è¯"
            },
            {
                id: 12,
                name: "å®é©¬ X3 2022æ¬¾ xDrive30i é¢†å…ˆå‹",
                brand: "å®é©¬",
                price: 32.8,
                originalPrice: 45.9,
                year: 2022,
                mileage: 2.5,
                location: "è‹å·å·¥ä¸šå›­åŒº",
                image: "https://via.placeholder.com/320x180/764ba2/ffffff?text=å®é©¬X3",
                engine: "2.0T",
                transmission: "8æŒ¡æ‰‹è‡ªä¸€ä½“",
                fuel: "æ±½æ²¹",
                color: "è“è‰²",
                owner: "ä¸ªäººå–å®¶"
            }
        ];

        let selectedCars = [];
        let filteredCars = [...carData];

        // æ¸²æŸ“è½¦è¾†åˆ—è¡¨
        function renderCars(cars) {
            const grid = document.getElementById('carGrid');
            const resultCount = document.getElementById('resultCount');
            
            if (cars.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 6H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H5V8h14v8zM12 9l-4 4h3v4h2v-4h3l-4-4z"/>
                        </svg>
                        <p>æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„è½¦è¾†</p>
                    </div>
                `;
                resultCount.textContent = 'å…± 0 è¾†';
                return;
            }
            
            resultCount.textContent = `å…± ${cars.length} è¾†`;
            
            grid.innerHTML = cars.map(car => {
                const isSelected = selectedCars.some(sc => sc.id === car.id);
                const carAge = new Date().getFullYear() - car.year;
                
                return `
                    <div class="car-card ${isSelected ? 'selected' : ''}" onclick="toggleCompare(${car.id})">
                        <img src="${car.image}" alt="${car.name}" class="car-image">
                        <div class="car-info">
                            <div class="car-name" title="${car.name}">${car.name}</div>
                            <div class="car-price">
                                ${car.price}<span>ä¸‡</span>
                                <span style="font-size: 12px; color: #999; margin-left: 10px;">æ–°è½¦ä»·: ${car.originalPrice}ä¸‡</span>
                            </div>
                            <div class="car-details">
                                <div class="car-detail">ğŸ“… ${car.year}å¹´</div>
                                <div class="car-detail">ğŸš— ${car.mileage}ä¸‡å…¬é‡Œ</div>
                                <div class="car-detail">âš™ï¸ ${car.transmission}</div>
                            </div>
                            <div class="car-location">ğŸ“ ${car.location}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // åˆ‡æ¢å¯¹æ¯”çŠ¶æ€
        function toggleCompare(carId) {
            const car = carData.find(c => c.id === carId);
            const index = selectedCars.findIndex(sc => sc.id === carId);
            
            if (index > -1) {
                selectedCars.splice(index, 1);
            } else if (selectedCars.length < 4) {
                selectedCars.push(car);
            } else {
                alert('æœ€å¤šåªèƒ½å¯¹æ¯”4è¾†è½¦ï¼');
                return;
            }
            
            updateCompareBar();
            renderCars(filteredCars);
        }

        // æ›´æ–°å¯¹æ¯”æ 
        function updateCompareBar() {
            const bar = document.getElementById('compareBar');
            const count = document.getElementById('compareCount');
            const list = document.getElementById('compareCarList');
            
            count.textContent = selectedCars.length;
            
            if (selectedCars.length > 0) {
                bar.classList.add('visible');
                list.innerHTML = selectedCars.map(car => 
                    `<div class="compare-car-item">${car.name}</div>`
                ).join('');
            } else {
                bar.classList.remove('visible');
            }
        }

        // æ¸…ç©ºå¯¹æ¯”
        function clearCompare() {
            selectedCars = [];
            updateCompareBar();
            renderCars(filteredCars);
        }

        // æ˜¾ç¤ºå¯¹æ¯”å¼¹çª—
        function showCompareModal() {
            if (selectedCars.length < 2) {
                alert('è¯·è‡³å°‘é€‰æ‹©2è¾†è½¦è¿›è¡Œå¯¹æ¯”ï¼');
                return;
            }
            
            const modal = document.getElementById('compareModal');
            const table = document.getElementById('compareTable');
            
            // æ‰¾å‡ºæ¯é¡¹çš„æœ€ä½³å€¼
            const bestPrice = Math.min(...selectedCars.map(c => c.price));
            const bestMileage = Math.min(...selectedCars.map(c => c.mileage));
            const bestYear = Math.max(...selectedCars.map(c => c.year));
            
            let html = '<thead><tr><th>é¡¹ç›®</th>';
            selectedCars.forEach(car => {
                html += `<td>
                    <div class="compare-car-name">${car.name}</div>
                    <div class="compare-car-price">${car.price}ä¸‡</div>
                </td>`;
            });
            html += '</tr></thead><tbody>';
            
            const rows = [
                { label: 'æ–°è½¦ä»·æ ¼', key: 'originalPrice', unit: 'ä¸‡', lower: true },
                { label: 'æŠ˜ä»·ç‡', custom: car => ((car.originalPrice - car.price) / car.originalPrice * 100).toFixed(1) + '%', lower: false },
                { label: 'ä¸Šç‰Œå¹´ä»½', key: 'year', unit: 'å¹´', lower: false },
                { label: 'è¡Œé©¶é‡Œç¨‹', key: 'mileage', unit: 'ä¸‡å…¬é‡Œ', lower: true },
                { label: 'å‘åŠ¨æœº', key: 'engine', unit: '' },
                { label: 'å˜é€Ÿç®±', key: 'transmission', unit: '' },
                { label: 'ç‡ƒæ–™ç±»å‹', key: 'fuel', unit: '' },
                { label: 'è½¦èº«é¢œè‰²', key: 'color', unit: '' },
                { label: 'æ‰€åœ¨åœ°åŒº', key: 'location', unit: '' },
                { label: 'å–å®¶ç±»å‹', key: 'owner', unit: '' }
            ];
            
            rows.forEach(row => {
                html += `<tr><th>${row.label}</th>`;
                selectedCars.forEach(car => {
                    let value = row.custom ? row.custom(car) : car[row.key] + row.unit;
                    let className = '';
                    
                    if (row.lower !== undefined) {
                        if (row.lower) {
                            if (row.key === 'price' && car.price === bestPrice) className = 'compare-best';
                            if (row.key === 'mileage' && car.mileage === bestMileage) className = 'compare-best';
                            if (row.key === 'originalPrice' && car.originalPrice === Math.min(...selectedCars.map(c => c.originalPrice))) className = 'compare-best';
                        } else {
                            if (row.key === 'year' && car.year === bestYear) className = 'compare-best';
                        }
                    }
                    
                    if (className === 'compare-best') {
                        value = `${value} <span class="badge badge-low">æœ€ä¼˜</span>`;
                    }
                    
                    html += `<td class="${className}">${value}</td>`;
                });
                html += '</tr>';
            });
            
            html += '</tbody>';
            table.innerHTML = html;
            modal.classList.add('visible');
        }

        // å…³é—­å¯¹æ¯”å¼¹çª—
        function closeCompareModal() {
            document.getElementById('compareModal').classList.remove('visible');
        }

        // ç­›é€‰è½¦è¾†
        function filterCars() {
            const priceRange = document.getElementById('priceRange').value;
            const brand = document.getElementById('brand').value;
            const carAge = document.getElementById('carAge').value;
            const mileage = document.getElementById('mileage').value;
            
            filteredCars = carData.filter(car => {
                // ä»·æ ¼ç­›é€‰
                if (priceRange) {
                    const [min, max] = priceRange.split('-').map(Number);
                    if (car.price < min || car.price > max) return false;
                }
                
                // å“ç‰Œç­›é€‰
                if (brand && car.brand !== brand) return false;
                
                // è½¦é¾„ç­›é€‰
                if (carAge) {
                    const age = new Date().getFullYear() - car.year;
                    if (age > parseInt(carAge)) return false;
                }
                
                // é‡Œç¨‹ç­›é€‰
                if (mileage && car.mileage > parseInt(mileage)) return false;
                
                return true;
            });
            
            // æ¸…ç©ºå·²é€‰æ‹©ä½†ä¸åœ¨ç­›é€‰ç»“æœä¸­çš„è½¦è¾†
            selectedCars = selectedCars.filter(sc => filteredCars.some(fc => fc.id === sc.id));
            updateCompareBar();
            renderCars(filteredCars);
        }

        // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
        document.getElementById('compareModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCompareModal();
            }
        });

        // åˆå§‹åŒ–
        renderCars(carData);
    </script>
</body>
</html>
